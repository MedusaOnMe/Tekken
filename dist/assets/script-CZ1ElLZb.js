class p{constructor(){this.canvas=document.getElementById("game-canvas"),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),this.state="menu",this.selectedCharacter="trump",this.difficulty="medium",this.round=1,this.timer=99,this.lastTime=0,this.player=null,this.opponent=null,this.ai=null,this.particles=[],this.effects=[],this.screenShake=0,this.audioSystem=new AudioSystem,this.audioInitialized=!1,this.keys={},this.lastKeys={},this.ultimateNotificationShown=!1,this.gameStats={maxCombo:0,matchTime:0,perfectWin:!0,damageDealt:0},this.backgroundImage=new Image,this.backgroundLoaded=!1,this.backgroundImage.onload=()=>{this.backgroundLoaded=!0,console.log("‚úÖ Background image loaded")},this.backgroundImage.onerror=()=>{console.log("‚ùå Background image failed to load, using default"),this.backgroundLoaded=!1},this.backgroundImage.src="background.png",this.setupEventListeners(),this.showMenu()}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}setupEventListeners(){var e,t,s,a,i,n;window.addEventListener("resize",()=>this.resizeCanvas()),document.addEventListener("keydown",o=>{this.keys[o.key.toLowerCase()]=!0,this.state==="playing"&&o.key==="Escape"&&this.pauseGame()}),document.addEventListener("keyup",o=>{this.keys[o.key.toLowerCase()]=!1}),document.getElementById("start-btn").addEventListener("click",()=>{this.initAudio(),this.showCharacterSelect()}),document.getElementById("character-fight-btn").addEventListener("click",()=>{console.log("üéÆ ENTER BATTLE CLICKED!"),this.startGame()}),document.getElementById("difficulty-btn").addEventListener("click",()=>{this.cycleDifficulty()}),document.getElementById("controls-btn").addEventListener("click",()=>{this.showControls()}),document.getElementById("character-back").addEventListener("click",()=>{this.showMenu()}),document.getElementById("controls-back").addEventListener("click",()=>{this.showMenu()}),document.getElementById("resume-btn").addEventListener("click",()=>{this.resumeGame()}),document.getElementById("restart-btn").addEventListener("click",()=>{this.restartGame()}),document.getElementById("quit-btn").addEventListener("click",()=>{this.quitToMenu()}),(e=document.getElementById("rematch-btn"))==null||e.addEventListener("click",()=>{this.restartGame()}),(t=document.getElementById("menu-btn"))==null||t.addEventListener("click",()=>{this.quitToMenu()}),(s=document.getElementById("victory-rematch-btn"))==null||s.addEventListener("click",()=>{this.closeGameOverScreens(),this.restartGame()}),(a=document.getElementById("victory-menu-btn"))==null||a.addEventListener("click",()=>{this.closeGameOverScreens(),this.quitToMenu()}),(i=document.getElementById("defeat-rematch-btn"))==null||i.addEventListener("click",()=>{this.closeGameOverScreens(),this.restartGame()}),(n=document.getElementById("defeat-menu-btn"))==null||n.addEventListener("click",()=>{this.closeGameOverScreens(),this.quitToMenu()}),document.getElementById("tutorial-start").addEventListener("click",()=>{this.hideTutorial()}),document.addEventListener("keydown",o=>{o.key.toLowerCase()==="h"&&this.state==="playing"&&this.toggleControlHints()}),document.querySelectorAll(".character-card").forEach(o=>{o.addEventListener("click",l=>{this.selectCharacter(l.target.closest(".character-card").dataset.character)}),o.addEventListener("mouseenter",()=>{this.animateCharacterCard(o,!0)}),o.addEventListener("mouseleave",()=>{this.animateCharacterCard(o,!1)})}),document.querySelectorAll(".menu-btn").forEach(o=>{o.addEventListener("mouseenter",()=>{this.audioInitialized&&this.audioSystem.playSound("menu_hover")})})}initAudio(){this.audioInitialized||(this.audioInitialized=this.audioSystem.init(),this.audioInitialized&&this.audioSystem.playBackgroundMusic())}showMenu(){this.hideAllScreens(),document.getElementById("main-menu").classList.add("active"),this.state="menu"}showCharacterSelect(){this.hideAllScreens(),document.getElementById("character-select").classList.add("active"),this.audioSystem.playSound("menu_select")}showControls(){this.hideAllScreens(),document.getElementById("controls-screen").classList.add("active"),this.audioSystem.playSound("menu_select")}hideAllScreens(){console.log("=== HIDEALLSCREENS DEBUG ===");const e=document.querySelectorAll(".menu-screen");console.log("Menu screens found:",e.length),e.forEach((s,a)=>{console.log(`Screen ${a}: id=${s.id}, classes=${s.classList.toString()}`),s.classList.remove("active"),console.log(`Screen ${a} after remove: classes=${s.classList.toString()}`)});const t=document.querySelector(".game-screen");console.log("Game screen found:",!!t),t&&(console.log("Game screen classes before:",t.classList.toString()),t.classList.remove("active"),console.log("Game screen classes after:",t.classList.toString()))}closeGameOverScreens(){console.log("=== CLOSING GAME OVER SCREENS ===");const e=document.getElementById("victory-screen"),t=document.getElementById("defeat-screen");e&&(e.classList.remove("active"),e.style.display="none",e.style.zIndex="",e.style.position="",e.style.backgroundColor="",e.style.backdropFilter="",console.log("Victory screen closed")),t&&(t.classList.remove("active"),t.style.display="none",t.style.zIndex="",t.style.position="",t.style.backgroundColor="",t.style.backdropFilter="",console.log("Defeat screen closed"))}selectCharacter(e){this.selectedCharacter=e,document.querySelectorAll(".character-card").forEach(a=>{a.classList.remove("selected");const i=a.querySelector(".character-aura");i&&(i.style.opacity="0")});const t=document.querySelector(`[data-character="${e}"]`);t.classList.add("selected");const s=t.querySelector(".character-aura");s&&(s.style.opacity="0.4"),this.audioSystem.playSound("menu_select")}cycleDifficulty(){const e=["easy","medium","hard","insane"],t=e.indexOf(this.difficulty);this.difficulty=e[(t+1)%e.length],document.getElementById("difficulty-text").textContent=this.difficulty.charAt(0).toUpperCase()+this.difficulty.slice(1),this.audioSystem.playSound("menu_select")}startGame(){console.log("üöÄ STARTING GAME!"),this.hideAllScreens(),document.querySelector(".game-screen").classList.add("active"),this.state="playing";const e=this.canvas.width*.25,t=this.canvas.width*.75,s=this.canvas.height-250;try{console.log("Creating player character:",this.selectedCharacter),this.player=new Character(this.selectedCharacter,e,s,!0);const a=this.selectedCharacter==="trump"?"elon":"trump";console.log("Creating opponent character:",a),this.opponent=new Character(a,t,s,!1),console.log("Characters created successfully")}catch(a){console.error("Error creating characters:",a),alert("Failed to load game characters. Please refresh and try again.");return}this.ai=new FighterAI(this.opponent,this.difficulty),this.opponent.ai=this.ai,this.updateUI(),this.showTutorial(),this.showAnnouncement("FIGHT!",1500),this.audioSystem.playSound("round_start"),this.gameStats={maxCombo:0,matchTime:0,perfectWin:!0,damageDealt:0},this.lastTime=performance.now(),this.gameLoop()}pauseGame(){this.state==="playing"&&(this.state="paused",document.getElementById("pause-menu").classList.add("active"))}resumeGame(){this.state==="paused"&&(this.state="playing",document.getElementById("pause-menu").classList.remove("active"),this.lastTime=performance.now(),this.gameLoop())}restartGame(){this.hideAllScreens(),document.querySelector(".game-screen").classList.add("active"),this.round=1,this.timer=99;const e=this.canvas.width*.25,t=this.canvas.width*.75,s=this.canvas.height-250;this.player.reset(e,s),this.opponent.reset(t,s),this.ai.reset(),this.particles=[],this.effects=[],this.screenShake=0,this.state="playing",this.showAnnouncement("FIGHT!",1500),this.audioSystem.playSound("round_start"),this.gameStats={maxCombo:0,matchTime:0,perfectWin:!0,damageDealt:0},this.lastTime=performance.now(),this.gameLoop()}quitToMenu(){this.state="menu",this.showMenu(),this.audioSystem.stopBackgroundMusic(),this.audioSystem.playBackgroundMusic()}gameLoop(e=0){if(this.state!=="playing")return;const t=e-this.lastTime;this.lastTime=e,this.update(t),this.render(),this.gameLoopId=requestAnimationFrame(s=>this.gameLoop(s))}update(e){this.handleInput(),this.player.update(e,this.opponent,this.canvas),this.opponent.update(e,this.player,this.canvas),this.ai.update(e,this.player),this.processAIAttacks(),this.updateParticles(e),this.updateEffects(e),this.screenShake>0&&(this.screenShake-=e),this.updateTimer(e),this.checkWinCondition(),this.updateUI(),this.checkUltimateReady(),this.player.maxCombo>this.gameStats.maxCombo&&(this.gameStats.maxCombo=this.player.maxCombo),this.opponent.maxCombo>this.gameStats.maxCombo&&(this.gameStats.maxCombo=this.opponent.maxCombo)}handleInput(){this.keys.a?this.player.move(-1):this.keys.d&&this.player.move(1),this.keys.w&&this.player.jump(),this.keys.s?this.player.block(!0):this.player.block(!1),this.keys.j&&!this.lastKeys.j&&this.player.attack("punch",this.opponent)&&this.handleAttackEffects(this.player,"punch"),this.keys.k&&!this.lastKeys.k&&this.player.attack("kick",this.opponent)&&this.handleAttackEffects(this.player,"kick"),this.keys.l&&!this.lastKeys.l&&this.player.attack("special",this.opponent)&&this.handleAttackEffects(this.player,"special"),this.keys[" "]&&!this.lastKeys[" "]&&this.player.attack("ultimate",this.opponent)&&(this.handleAttackEffects(this.player,"ultimate"),this.addScreenShake(500)),this.lastKeys={...this.keys}}handleAttackEffects(e,t){const s=e.moves[t];s.sound&&this.audioSystem.playSound(s.sound),(t==="special"||t==="ultimate")&&this.createSpecialEffect(e,s.effect),s.projectile||setTimeout(()=>{const a=e===this.player?this.opponent:this.player;if(e.checkHit(a,s)){const i=e.dealDamage(a,s);this.createHitEffect(a.x+a.width/2,a.y+a.height/2),i.blocked||(this.addScreenShake(200),a.health<=0&&(console.log(`${a.name} defeated!`),this.endRound()))}},100)}processAIAttacks(){if(this.opponent.lastAttack&&console.log(`üîç Processing AI attack - Age: ${Date.now()-this.opponent.lastAttack.timestamp}ms`),this.opponent.lastAttack&&this.opponent.lastAttack.timestamp>Date.now()-500){const e=this.opponent.lastAttack;console.log(`‚öîÔ∏è AI ATTACK DETECTED! Move: ${e.move.name||"punch"}, Target: ${e.target.name}`);const t=Math.abs(this.opponent.x+this.opponent.width/2-(e.target.x+e.target.width/2));if(console.log(`üìè Distance check: ${t} vs range: ${e.move.range}`),this.opponent.checkHit(e.target,e.move)){const s=this.opponent.dealDamage(e.target,e.move);this.createHitEffect(e.target.x+e.target.width/2,e.target.y+e.target.height/2),console.log(`ü§ñ AI HIT! Damage: ${s.damage}, Player health: ${e.target.health}/${e.target.maxHealth}`),s.blocked?console.log("üõ°Ô∏è Player blocked AI attack!"):(this.addScreenShake(300),e.target.health<=0&&(console.log("üíÄ Player defeated by AI!"),this.endRound()))}else console.log(`‚ùå AI attack missed - distance: ${t}, range: ${e.move.range}`);this.opponent.lastAttack=null,console.log("üóëÔ∏è Cleared AI attack")}}render(){if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.screenShake>0){const e=(Math.random()-.5)*10,t=(Math.random()-.5)*10;this.ctx.translate(e,t)}this.renderBackground(),this.renderCharacter(this.player),this.renderCharacter(this.opponent),this.renderProjectiles(),this.renderParticles(),this.renderEffects(),this.ctx.restore(),this.renderComboCounter()}renderBackground(){if(this.backgroundLoaded&&this.backgroundImage.complete)this.ctx.drawImage(this.backgroundImage,0,0,this.canvas.width,this.canvas.height);else{const e=this.ctx.createLinearGradient(0,0,0,this.canvas.height);e.addColorStop(0,"#87CEEB"),e.addColorStop(.6,"#87CEEB"),e.addColorStop(.6,"#228B22"),e.addColorStop(1,"#1a5f1a"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}this.ctx.fillStyle="#654321",this.ctx.fillRect(0,this.canvas.height-100,this.canvas.width,100)}renderCharacter(e){if(this.ctx.save(),e.facingRight||(this.ctx.translate(e.x+e.width,e.y),this.ctx.scale(-1,1),this.ctx.translate(-e.x,-e.y)),e.imageLoaded){const t=e.getCurrentSpriteImage();t&&t.complete?this.ctx.drawImage(t,e.x,e.y,e.width,e.height):(this.ctx.fillStyle=e.color,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.fillStyle=e.type==="trump"?"#ffd700":"#333",this.ctx.fillRect(e.x+10,e.y-20,e.width-20,20))}else this.ctx.fillStyle=e.color,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.fillStyle=e.type==="trump"?"#ffd700":"#333",this.ctx.fillRect(e.x+10,e.y-20,e.width-20,20);this.ctx.restore()}renderProjectiles(){[...this.player.projectiles,...this.opponent.projectiles].forEach(e=>{this.ctx.fillStyle=e.effect==="rocket_punch"?"#ff4500":"#4169e1",this.ctx.fillRect(e.x,e.y,e.width,e.height);for(let t=0;t<3;t++)this.createParticle(e.x+Math.random()*e.width,e.y+Math.random()*e.height,e.effect==="rocket_punch"?"#ff6347":"#1e90ff")})}renderParticles(){this.particles.forEach(e=>{this.ctx.fillStyle=e.color,this.ctx.globalAlpha=e.alpha,this.ctx.fillRect(e.x,e.y,e.size,e.size),this.ctx.globalAlpha=1})}renderEffects(){this.effects.forEach(e=>{this.ctx.save(),e.type==="hit"&&(this.ctx.strokeStyle=e.color,this.ctx.lineWidth=3,this.ctx.globalAlpha=e.alpha,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,Math.PI*2),this.ctx.stroke()),this.ctx.restore()})}renderComboCounter(){const e=Math.max(this.player.currentCombo,this.opponent.currentCombo);if(e>=3){const t=document.getElementById("combo-counter"),s=t.querySelector(".combo-number");s.textContent=e,t.classList.add("active"),setTimeout(()=>{t.classList.remove("active")},1e3)}}updateUI(){const e=Math.max(0,this.player.health/this.player.maxHealth*100),t=Math.max(0,this.opponent.health/this.opponent.maxHealth*100);document.getElementById("p1-health").style.width=`${e}%`,document.getElementById("p2-health").style.width=`${t}%`;const s=document.getElementById("p1-health"),a=document.getElementById("p2-health");e<25?s.style.backgroundColor="#ff4444":e<50?s.style.backgroundColor="#ffaa00":s.style.backgroundColor="#4CAF50",t<25?a.style.backgroundColor="#ff4444":t<50?a.style.backgroundColor="#ffaa00":a.style.backgroundColor="#4CAF50";const i=this.player.specialEnergy/this.player.maxSpecialEnergy*100,n=this.opponent.specialEnergy/this.opponent.maxSpecialEnergy*100;document.getElementById("p1-special").style.width=`${i}%`,document.getElementById("p2-special").style.width=`${n}%`,document.getElementById("p1-name").textContent=this.player.name.toUpperCase(),document.getElementById("p2-name").textContent=this.opponent.name.toUpperCase(),document.getElementById("round-number").textContent=this.round,document.getElementById("game-timer").textContent=Math.ceil(this.timer)}updateTimer(e){this.gameStats.matchTime+=e,this.timer-=e/1e3,this.timer<=0&&(this.timer=0,this.endRound())}updateParticles(e){for(let t=this.particles.length-1;t>=0;t--){const s=this.particles[t];s.x+=s.vx,s.y+=s.vy,s.vy+=.5,s.alpha-=e/1e3,s.size*=.98,(s.alpha<=0||s.size<.5)&&this.particles.splice(t,1)}}updateEffects(e){for(let t=this.effects.length-1;t>=0;t--){const s=this.effects[t];s.radius+=s.growth,s.alpha-=e/500,s.alpha<=0&&this.effects.splice(t,1)}}createParticle(e,t,s){this.particles.push({x:e,y:t,vx:(Math.random()-.5)*5,vy:Math.random()*-5-2,size:Math.random()*10+5,color:s,alpha:1})}createHitEffect(e,t){this.effects.push({type:"hit",x:e,y:t,radius:10,growth:5,color:"#ffd93d",alpha:1});for(let s=0;s<15;s++)this.createParticle(e+(Math.random()-.5)*30,t+(Math.random()-.5)*30,"#ffd93d");for(let s=0;s<8;s++)this.createParticle(e,t,"#ff6b6b");this.audioSystem.playHitSound(10)}createSpecialEffect(e,t){const s=e.x+e.width/2,a=e.y+e.height/2;for(let i=0;i<20;i++){const n=Math.PI*2*i/20,o=10;this.particles.push({x:s,y:a,vx:Math.cos(n)*o,vy:Math.sin(n)*o,size:15,color:t.includes("trump")?"#ff6b6b":"#667eea",alpha:1})}}addScreenShake(e){this.screenShake=e,document.getElementById("game-container").classList.add("screen-shake"),setTimeout(()=>{document.getElementById("game-container").classList.remove("screen-shake")},e)}showAnnouncement(e,t){const s=document.getElementById("announcement-text");s.textContent=e,s.classList.add("active"),setTimeout(()=>{s.classList.remove("active")},t)}checkWinCondition(){(this.player.health<=0||this.opponent.health<=0||this.timer<=0)&&(console.log(`Win condition met: Player HP: ${this.player.health}, Opponent HP: ${this.opponent.health}, Timer: ${this.timer}`),this.endRound())}endRound(){console.log("endRound called"),this.state="round-end",this.gameLoopId&&(cancelAnimationFrame(this.gameLoopId),this.gameLoopId=null);const e=this.player.health>this.opponent.health?this.player:this.opponent;e===this.player?this.opponent:this.player,console.log("Winner determined:",e.name),e===this.player&&this.player.health===this.player.maxHealth?this.gameStats.perfectWin=!0:this.gameStats.perfectWin=!1,e===this.player?(this.player.playVictoryAnimation(),this.opponent.playDefeatAnimation()):(this.opponent.playVictoryAnimation(),this.player.playDefeatAnimation()),setTimeout(()=>{this.showGameOver(e)},1500),this.audioSystem.playSound(e===this.player?"victory":"defeat")}showGameOver(e){console.log("=== SHOWGAMEOVER DEBUG START ==="),console.log("showGameOver called with winner:",e),console.log("Winner is player:",e===this.player),console.log("Current state:",this.state);const t=document.querySelectorAll('[id$="-screen"]');if(console.log("All screens in DOM:",Array.from(t).map(n=>n.id)),this.state==="game-over"){console.log("Already in game-over state, ignoring duplicate call");return}this.state="game-over",console.log("State set to game-over"),console.log("Calling hideAllScreens..."),this.hideAllScreens();const s=e===this.player,a=s?"victory-screen":"defeat-screen";console.log("Screen to show:",a),console.log("Is victory:",s);const i=document.getElementById(a);if(console.log("Screen element found:",!!i),i?(console.log("Screen display before:",getComputedStyle(i).display),console.log("Screen classList before:",i.classList.toString()),i.classList.add("active"),i.style.display="flex",i.style.zIndex="9999",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.backgroundColor="rgba(0, 0, 0, 0.9)",i.style.backdropFilter="blur(10px)",console.log("Screen display after:",getComputedStyle(i).display),console.log("Screen classList after:",i.classList.toString()),console.log("Screen visibility:",getComputedStyle(i).visibility),console.log("Screen z-index:",getComputedStyle(i).zIndex),console.log("Screen position:",getComputedStyle(i).position),console.log(`${a} should now be visible with forced styles`)):console.error(`${a} not found!`),s){const n=document.getElementById("victory-winner-name"),o=document.getElementById("victory-sprite"),l=document.getElementById("victory-quote"),c=document.getElementById("victory-time"),r=document.getElementById("victory-combo"),h=document.getElementById("victory-perfect");if(n&&(n.textContent=e.name.toUpperCase()),l&&(l.textContent=e.type==="trump"?`"You're fired!"`:'"To Mars and beyond!"'),o&&(o.src=`sprites/${e.type}/${e.type}_idle.png`),c){const d=Math.floor(this.gameStats.matchTime/6e4),m=Math.floor(this.gameStats.matchTime%6e4/1e3);c.textContent=`${d}:${m.toString().padStart(2,"0")}`}r&&(r.textContent=this.gameStats.maxCombo),h&&(h.textContent=this.gameStats.perfectWin?"YES":"NO"),this.createVictoryParticles(),this.createConfetti()}else{const n=document.getElementById("defeat-winner-name"),o=document.getElementById("defeat-sprite"),l=document.getElementById("defeat-quote"),c=document.getElementById("defeat-time"),r=document.getElementById("defeat-combo"),h=document.getElementById("defeat-damage");if(n&&(n.textContent=e.name.toUpperCase()),l&&(l.textContent=e.type==="trump"?`"You're fired!"`:'"To Mars and beyond!"'),o&&(o.src=`sprites/${e.type}/${e.type}_idle.png`),c){const d=Math.floor(this.gameStats.matchTime/6e4),m=Math.floor(this.gameStats.matchTime%6e4/1e3);c.textContent=`${d}:${m.toString().padStart(2,"0")}`}r&&(r.textContent=this.gameStats.maxCombo),h&&(h.textContent=Math.floor(this.opponent.maxHealth-this.opponent.health))}}createVictoryParticles(){const e=document.getElementById("victory-particles");if(!e)return;e.innerHTML="";const t=["üéâ","üéä","üèÜ","‚≠ê","üéà","üéÜ","üî•","üíØ","üöÄ","üí™"],s=document.createDocumentFragment();for(let a=0;a<8;a++){const i=document.createElement("div");i.className="victory-particle",i.textContent=t[Math.floor(Math.random()*t.length)],i.style.left=Math.random()*100+"%",i.style.animationDelay=a*.3+"s",i.style.animationDuration=3+Math.random()+"s",s.appendChild(i)}e.appendChild(s),setTimeout(()=>{e.innerHTML=""},6e3)}createConfetti(){const e=document.getElementById("confetti-container");if(!e)return;e.innerHTML="";const t=["#ff6b6b","#4ecdc4","#45b7d1","#f39c12","#9b59b6","#e74c3c","#2ecc71","#f1c40f"],s=document.createDocumentFragment();for(let a=0;a<25;a++){const i=document.createElement("div");i.className="confetti-piece",i.style.left=Math.random()*100+"%",i.style.backgroundColor=t[Math.floor(Math.random()*t.length)],i.style.animationDelay=Math.random()*2+"s",i.style.animationDuration=2+Math.random()*2+"s",s.appendChild(i)}e.appendChild(s),setTimeout(()=>{e.innerHTML=""},5e3)}animateCharacterCard(e,t){const s=e.querySelector(".idle-sprite"),a=e.querySelector(".action-sprite"),i=e.querySelector(".character-aura");t?(s&&a&&setTimeout(()=>{e.matches(":hover")&&(s.style.opacity="0",a.style.opacity="1",setTimeout(()=>{e.matches(":hover")&&(s.style.opacity="1",a.style.opacity="0")},500))},200),i&&(i.style.opacity="0.4")):(s&&a&&(s.style.opacity="1",a.style.opacity="0"),i&&!e.classList.contains("selected")&&(i.style.opacity="0"))}showTutorial(){document.getElementById("tutorial-overlay").style.display="flex",this.state="tutorial"}hideTutorial(){document.getElementById("tutorial-overlay").style.display="none",this.state="playing",this.lastTime=performance.now(),this.gameLoop()}toggleControlHints(){const e=document.getElementById("control-hints");e.style.display==="none"?e.style.display="block":e.style.display="none"}checkUltimateReady(){const e=document.getElementById("ultimate-ready");this.player.specialEnergy>=80&&!this.ultimateNotificationShown&&(e.classList.add("active"),this.ultimateNotificationShown=!0,setTimeout(()=>{e.classList.remove("active")},3e3)),this.player.specialEnergy<80&&(this.ultimateNotificationShown=!1)}}new p;
